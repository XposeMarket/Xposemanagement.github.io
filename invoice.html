<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Invoice</title><link rel="stylesheet" href="styles.css"></head><body>
<header class="top">
  <div class="container row top row">
    <a class="brand" href="dashboard.html" aria-label="Xpose Management Home">
      <img src="assets/logo.svg" alt="Xpose Management logo">
      <b>Xpose Management</b>
    </a>
    <nav>
      <a href="dashboard.html" class="">Dashboard</a>
      <a href="appointments.html" class="">Appointments</a>
      <a href="jobs.html" class="">Jobs</a>
      <a href="messages.html" class="">Messages</a>
      <a href="invoices.html" class="">Invoices</a>
      <a href="settings.html" class="">Settings</a>
      <a href="profile.html" class="">Profile</a>
    </nav>
    <div>
      <button id="themeToggle" class="btn" aria-label="Toggle theme">Theme</button>
      <button id="logoutBtn" class="btn" aria-label="Logout">Logout</button>
    </div>
  </div>
</header>
<main class="container" style="padding:16px 0"><div id="invBrand">
  <img src="assets/logo.svg" alt="Xpose Management" class="brand-left">
<img src="assets/grlogo.png" alt="GR Automotive" class="brand-right" onerror="this.onerror=null; this.src='grlogo.png';"/>
</div>
<div class="no-print" style="text-align:right; margin-bottom:8px"><button class="btn" onclick="window.print()">Print</button></div>
<h1>Invoice <span id="invNo"></span></h1>
<div><b>Customer:</b> <span id="invCustomer">-</span></div><div><b>Vehicle:</b> <span id="invVehicle">-</span></div><p class="notice" id="invMeta" style="margin-top:6px"></p></div></div><table class="table" id="invItems"><thead><tr><th>Item</th><th>Qty</th><th>Price</th><th>Total</th></tr></thead><tbody></tbody></table><div style="text-align:right;margin-top:10px"><div><b>Subtotal:</b> <span id="iSub">0.00</span></div><div><b>Tax:</b> <span id="iTax">0.00</span></div><div><b>Discount:</b> <span id="iDisc">0.00</span></div><div style="font-size:18px;margin-top:6px"><b>Grand Total:</b> <span id="iGrand">0.00</span></div></div></div>
<img src="assets/logo.svg" alt="Xpose Management" id="printFooterLogo" class="no-screen">
</main><footer class="container">© GR Automotive</footer><script src="app.js"></script><script>(function(){const q=new URLSearchParams(location.search);const id=q.get('id');if(!id)return;const data=JSON.parse(localStorage.getItem('xm_data')||'{}')||{};const inv=(data.invoices||[]).find(i=>String(i.id)===id||String(i.number)===id);if(!inv)return;document.getElementById('invNo').textContent=inv.number||inv.id;let customer=inv.customer||'-';let vehicle='-';if(inv.appointment_id){const appt=(data.appointments||[]).find(a=>a.id===inv.appointment_id);if(appt){customer=[appt.customer_first||'',appt.customer_last||''].join(' ').trim()||customer;vehicle=appt.vehicle||vehicle;}}document.getElementById('invCustomer').textContent=customer;document.getElementById('invVehicle').textContent=vehicle;document.getElementById('invMeta').textContent=(inv.due?('Due '+inv.due+' · '):'')+'Status: '+(inv.status||'open');const tbody=document.querySelector('#invItems tbody');let sub=0;(inv.items||[]).forEach(it=>{const row=document.createElement('tr');const total=(Number(it.qty)||0)*(Number(it.price)||0);sub+=total;row.innerHTML=`<td>${it.name}</td><td>${it.qty}</td><td>$${Number(it.price).toFixed(2)}</td><td>$${total.toFixed(2)}</td>`;tbody.appendChild(row);});const tax=sub*((Number(inv.tax_rate)||0)/100);const disc=sub*((Number(inv.discount)||0)/100);document.getElementById('iSub').textContent=sub.toFixed(2);document.getElementById('iTax').textContent=tax.toFixed(2);document.getElementById('iDisc').textContent=disc.toFixed(2);document.getElementById('iGrand').textContent=(sub+tax-disc).toFixed(2);})();</script><script src="multi-tenant.js"></script>
</body></html>