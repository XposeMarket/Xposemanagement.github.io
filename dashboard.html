<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Dashboard</title><link rel="stylesheet" href="styles.css"></head><body>
<header class="top">
  <div class="container row top row">
    <a class="brand" href="dashboard.html" aria-label="Home">
      <img id="headerLogo" src="XposeManagementCRMlogo.png" alt="Logo">
    </a>
    <button id="menuToggle" class="menu-toggle" aria-label="Toggle menu"><span></span><span></span><span></span></button><nav id="mainNav">
      <a href="dashboard.html" class="active">Dashboard</a>
      <a href="appointments.html" class="">Appointments</a>
      <a href="jobs.html" class="">Jobs</a>
      <a href="messages.html" class="">Messages</a>
      <a href="invoices.html" class="">Invoices</a>
      <a href="customers.html" class="">Customers</a>
      <a href="settings.html" class="">Settings</a>
      <a href="profile.html" class="">Profile</a>
    </nav>
    <div>
      <button id="themeToggle" class="btn" aria-label="Toggle theme">Theme</button>
      <button id="logoutBtn" class="btn" aria-label="Logout">Logout</button>
    </div>
  </div>
</header>
<main style="padding:16px 20px"><div class="dashboard-layout">
  <div class="sidebar left-sidebar">
    <div class="card">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <h3 style="margin:0"><a href="invoices.html" style="color:inherit">Open Invoices</a></h3>
        <div id="openInvTotal" style="font-size:18px;font-weight:700;color:var(--accent)">$0</div>
      </div>
      <select id="invSortFilter" style="margin-bottom:12px;width:100%;padding:8px;border:1px solid var(--line);border-radius:6px;background:var(--card);color:var(--text);font-size:12px;cursor:pointer">
        <option value="date">Sort by Date</option>
        <option value="amount-high">Amount (High to Low)</option>
        <option value="amount-low">Amount (Low to High)</option>
        <option value="name-az">Customer A-Z</option>
        <option value="name-za">Customer Z-A</option>
      </select>
      <div id="openInvoicesList" style="display:flex;flex-direction:column;gap:8px;">
        <p class="notice" id="invoicesEmpty">No open invoices</p>
      </div>
    </div>
    <div class="card" style="margin-top:12px">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <h3 style="margin:0"><a href="jobs.html" style="color:inherit">Active Jobs</a></h3>
        <div id="activeJobsTotal" style="font-size:18px;font-weight:700;color:var(--accent)">0</div>
      </div>
      <select id="jobViewToggle" style="margin-bottom:12px;width:100%;padding:8px;border:1px solid var(--line);border-radius:6px;background:var(--card);color:var(--text);font-size:12px;cursor:pointer">
        <option value="active">Active Jobs</option>
        <option value="awaiting_parts">Awaiting Parts</option>
      </select>
      <div id="activeJobsList" style="display:flex;flex-direction:column;gap:8px;">
        <p class="notice" id="jobsEmpty">No active jobs</p>
      </div>
    </div>
  </div>
    <div style="display:flex;flex-direction:column">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <h1 style="margin:0">Dashboard</h1>
    </div>
    <div style="display:flex;gap:8px;margin-bottom:12px">
      <button id="btnNewAppt" class="btn quick-create" title="Create new appointment">+ Appointment</button>
      <button id="btnNewInv" class="btn quick-create" title="Create new invoice">+ Invoice</button>
      <button id="btnNewCust" class="btn quick-create" title="Create new customer">+ Customer</button>
    </div>
    <div class="kpis-center"><div class="kpis"><div class="kpi"><div class="notice">Leads this month</div><div id="kpiLeads" style="font-size:28px;font-weight:700">0</div></div><div class="kpi"><div class="notice">Appointments</div><div id="kpiAppts" style="font-size:28px;font-weight:700">0</div></div><div class="kpi"><div class="notice">Active jobs</div><div id="kpiJobs" style="font-size:28px;font-weight:700">0</div></div><div class="kpi"><div class="notice">Open invoices</div><div id="kpiInv" style="font-size:28px;font-weight:700">0</div></div></div></div>
    <div class="toolbar" style="gap:8px; align-items:center; margin-bottom:8px; margin-top:8px">
      <button id="monthPrev" class="btn" aria-label="Previous month">◀</button>
      <b id="monthLabel" style="min-width:200px; text-align:center"></b>
      <button id="monthNext" class="btn" aria-label="Next month">▶</button>
    </div>
    <div id="calGrid" class="calendar" aria-label="Month calendar"></div>
    <div class="card" style="margin-top:16px">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <h3 style="margin:0">Day details</h3>
        <span id="dayDateDisplay" style="font-size:14px;color:var(--muted)">Select a day</span>
      </div>
      <table class="table" id="dayTable">
        <thead>
          <tr>
            <th>Time</th>
            <th>Customer</th>
            <th>Vehicle</th>
            <th>Service</th>
            <th>Revenue</th>
            <th>Status</th>
            <th>Actions</th>
            <th></th> <!-- mobile toggle column -->
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <p class="notice" id="dayEmpty">Click a day to view appointments.</p>
    </div>
  </div>
  <div class="sidebar right-sidebar">
    <div id="quickStatsCard" class="card hoverable" role="button" tabindex="0" aria-label="Open quick stats" onclick="openQuickStatsModal && openQuickStatsModal()" onkeydown="if(event.key==='Enter'||event.key===' '){ openQuickStatsModal && openQuickStatsModal(); }">
      <h3>Quick Stats</h3>
      <div style="display:flex;flex-direction:column;gap:12px">
        <div style="padding:8px;border-left:3px solid var(--accent)">
          <p class="notice">Total Revenue</p>
          <div id="totalRevenueQuick" style="font-size:20px;font-weight:700">$0</div>
        </div>
        <div style="padding:8px;border-left:3px solid #3b82f6">
          <p class="notice">This Month Revenue</p>
          <div id="monthRevenueQuick" style="font-size:20px;font-weight:700">$0</div>
        </div>
        <div style="padding:8px;border-left:3px solid #10b981">
          <p class="notice">This Day Revenue</p>
          <div id="dayRevenueQuick" style="font-size:20px;font-weight:700">$0</div>
        </div>
      </div>
    </div>
    <div class="card clickable" role="button" tabindex="0" aria-label="View revenue summary" onclick="openRevenueModal && openRevenueModal()" onkeydown="if(event.key==='Enter'||event.key===' '){ openRevenueModal && openRevenueModal(); }">
      <h3 style="margin:0 0 12px 0;font-size:14px">Revenue Trend</h3>
      <div id="revenueChartContainer" style="position:relative;height:140px;width:100%">
        <canvas id="revenueChart"></canvas>
      </div>
    </div>
    <!-- Quick Stats Modal -->
    <div id="quickStatsModal" class="modal-overlay hidden" aria-hidden="true">
      <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="quickModalTitle">
        <div class="modal-head">
          <h2 id="quickModalTitle" style="margin:0">Quick Overview</h2>
          <button id="quickModalClose" class="btn" aria-label="Close">Close</button>
        </div>
        <div class="modal-body">
          <div id="quickModalContent" style="display:flex;flex-direction:column;gap:12px">
            <!-- populated dynamically -->
          </div>
        </div>
      </div>
    </div>
    <!-- Revenue Summary Modal (newspaper style) -->
    <div id="revenueModal" class="modal-overlay hidden" aria-hidden="true">
      <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="revModalTitle">
        <div class="modal-head">
          <h2 id="revModalTitle" style="font-family: 'Georgia', serif; margin:0;">Revenue Gazette — Summary</h2>
          <button id="revModalClose" class="btn" aria-label="Close">Close</button>
        </div>
        <div class="modal-body" style="font-family: 'Georgia', serif; color:var(--text);">
          <div id="revModalContent" style="display:flex;flex-direction:column;gap:12px">
            <!-- Filled dynamically -->
          </div>
        </div>
        <div class="modal-foot">
          <button id="revModalAI" class="btn">Summarize with AI</button>
          <button id="revModalExport" class="btn primary">Export as PDF</button>
        </div>
      </div>
    </div>
  </div>
</div></main><footer class="container">© Xpose Market</footer><script src="https://cdn.jsdelivr.net/npm/chart.js"></script><script src="vendor/supabase.umd.js"></script><script type="module" src="app.js"></script><script src="multi-tenant.js"></script>
</body></html>
